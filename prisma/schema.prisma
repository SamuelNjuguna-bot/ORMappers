
generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

// 1 to 1 mapping
model user{
  id Int @id @default(autoincrement())
  firstName String @default("John Doe")
  profile Profile?
}

model Profile{
  id Int @id @default(autoincrement())
  owner  user @relation(fields: [ownerId], references: [id])
  ownerId Int @unique
  username String
  phoneNumber BigInt
}


// 1 to many mapping
// Optional that is the user can add a course without a student

model student{
  id Int @id @default(autoincrement())
  courses Courses[]
}

model Courses{
  id Int @id @default(autoincrement())
  courseName String 
  courseId Int?
  studentId student? @relation(fields: [courseId], references: [id])
}

//  Mandatory : every course created must have a 
// model student{
//   id Int @id @default(autoincrement())
//   courses Courses[]
// }

// model Courses{
//   id Int @id @default(autoincrement())
//   courseName String 
//   courseId Int
//   studentId student @relation(fields: [courseId], references: [id])
// }



// Many to Many Relationship
// Explicit declaration

model Employee{
  id Int @id @default(autoincrement())
  employeename String @map("Name")
  jobtitle Employedwithtitle[]
}

model Jobtitle{
  id Int @id @default(autoincrement())
  jobtitle String @map("title")
  employee Employedwithtitle[]
}

model Employedwithtitle{
  id Int @default(autoincrement())
  employee Employee @relation(fields: [eId] , references: [id])
  jobtitle Jobtitle @relation(fields: [jId] , references: [id])
  eId Int
  jId Int
  created DateTime @default(now())
  @@id([eId, jId])
}
